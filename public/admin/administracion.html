<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta-name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - Torneo Juvenil La Pradera</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="icon" type="image/png" href="../images/EscudoTorneo.png">

    <!-- ESTILOS (Se mantienen) -->
    <style>
        :root {
            --color-blue: #0082C9; --color-cyan: #00B7DF; --color-dark: #002B3C; --color-light: #D5F6FC;
        }

        body { background-color: #f8f9fa; color: var(--color-dark); font-family: 'Poppins','Roboto',sans-serif; overflow: hidden; }
        #page-container { min-height: 100vh; }
        #sidebar-wrapper {
            width: 250px; min-width: 250px; height: 100vh; position: fixed; background-color: var(--color-dark) !important;
            padding-top: 20px; overflow-y: auto; z-index: 1000;
        }
        #sidebar-wrapper .list-group-item { color: #ccc; background-color: transparent !important; border: none; padding-left: 30px; font-weight: 500; transition: all 0.2s; }
        #sidebar-wrapper .list-group-item:hover { color: #fff; background-color: #1a1a1a !important; }
        #sidebar-wrapper .list-group-item.active { color: var(--color-cyan) !important; border-left: 4px solid var(--color-cyan); background-color: #1a1a1a !important; }

        #main-wrapper { margin-left: 250px; width: 100%; display: flex; flex-direction: column; min-height: 100vh; }
        .navbar-custom { background: linear-gradient(90deg, #002B3C 70%, #0082C9 100%) !important; border-bottom: 3px solid var(--color-cyan); z-index: 999; }
        .navbar-brand { color: var(--color-cyan) !important; font-weight: 900; }
        
        #content-area { opacity: 0; transition: opacity 0.3s; }
        #content-area.loaded { opacity: 1; }

        .table-dark { --bs-table-bg: var(--color-blue); --bs-table-hover-bg: #45b3e6; color: #fff; }
        .table-secondary { --bs-table-bg: var(--color-cyan); color: #fff !important; }
        .table-secondary th { color: #fff; }
        .btn-admin, .btn-success, .btn-info { background: var(--color-cyan)!important; color: var(--color-dark)!important; font-weight:700; }
        .btn-admin:hover, .btn-success:hover, .btn-info:hover { background: var(--color-blue)!important; color: var(--color-light)!important; }
    </style>
</head>

<body>
    
    <!-- üîê PROTECCI√ìN DE RUTA -->
    <script>
        const usuario = localStorage.getItem("email_admin");
        const rol = localStorage.getItem("rol");

        if (!usuario || !rol) {
            window.location.href = "login.html";
        }
    </script>
    
    <div id="page-container" class="d-flex">
        <!-- ASIDE / BARRA LATERAL -->
        <aside id="sidebar-wrapper" class="shadow">
            <div class="p-3 text-white fw-bold border-bottom mb-3" style="font-size: 1.2rem;">
                <a class="navbar-brand" href="administracion.html">
                    <img src="../images/EscudoTorneo.png" alt="Logo Torneo" height="35" class="me-2">
                    Admin Juvenil
                </a>
            </div>
            
            <div class="list-group list-group-flush" id="admin-nav-links">
                <a class="list-group-item list-group-item-action" href="#" data-view="dashboard">
                    <i class="bi bi-house-door-fill me-2"></i> Dashboard
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="equipos">
                    <i class="bi bi-shield-fill me-2"></i> Equipos
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="jugadores">
                    <i class="bi bi-person-lines-fill me-2"></i> Jugadores
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="partidos">
                    <i class="bi bi-calendar-event-fill me-2"></i> Partidos/Fixture
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="goleadores">
                    <i class="bi bi-trophy-fill me-2"></i> Goleadores
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="posiciones">
                    <i class="bi bi-list-ol me-2"></i> Posiciones
                </a>
                <a class="list-group-item list-group-item-action" href="#" data-view="usuarios">
                    <i class="bi bi-people-fill me-2"></i> Usuarios Admin
                </a>
            </div>
        </aside>

        <div id="main-wrapper">
            
            <!-- NAVBAR TOP -->
            <nav class="navbar navbar-expand-md navbar-custom shadow-sm sticky-top">
                <div class="container-fluid">
                    
                    <span class="navbar-text text-white fw-bold me-auto">
                        <i class="bi bi-person-circle me-2"></i>
                        <span id="user-display-email"></span> | Rol: <span id="user-display-rol"></span>
                    </span>

                    <button class="btn btn-sm btn-outline-light text-danger fw-bold" id="logoutBtn">
                        <i class="bi bi-box-arrow-right"></i> Cerrar Sesi√≥n
                    </button>
                </div>
            </nav>

            <!-- √ÅREA DE CONTENIDO DIN√ÅMICO -->
            <main class="flex-grow-1 overflow-auto">
                <div class="container-fluid py-4" id="content-area">
                    <!-- Contenido SPA -->
                </div>
            </main>

        </div>
    </div>

    <!-- MODAL √öNICO PARA OPERACIONES CRUD -->
    <div class="modal fade" id="crudModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="crudModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="crudModalBody">
                    <!-- Formularios inyectados aqu√≠ -->
                </div>
            </div>
        </div>
    </div>


    <!-- BOOTSTRAP -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- 1. LIBRER√çA SUPABASE CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- 2. ARCHIVO DE CLIENTE CENTRALIZADO (Contiene las Keys) -->
    <script type="module" src="../scripts/supabaseClient.js"></script>
    
    <!-- 3. L√ìGICA DE LA SPA (El nuevo archivo modular) -->
    <script type="module" src="./scripts/administracion.js"></script>
    
</body>
</html>